Todo:
- Make worker::work and children threadsafe.
- In connection_middleman::handle_read, use multiple threads to compute responses.
- Investiage if compression would be useful.
- Replace std::map with something more efficient. (According to profiling data, the only function busier than worker::work is std::_Rb_tree::_M_lower_bound, which is used by std::map.)

Notes:
- Only one announce is possible at a time because db->torrent_list_mutex is locked.
